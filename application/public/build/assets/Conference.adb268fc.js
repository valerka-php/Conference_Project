import{H as V}from"./HomeLayout.ece2bcf7.js";import H from"./Map.848c73c4.js";import{B as M}from"./BackButton.45c05563.js";import U from"./EditButton.546c6a3f.js";import A from"./DeleteButton.240c4ca2.js";import{a as F,S as j}from"./SocialMedia.5fcff114.js";import R from"./LeaveButton.49f3d7ae.js";import{L as T,H as O,q as n,o as a,g as f,a as o,d as e,t as l,w as r,k as m,F as q,e as u,c as p}from"./app.37dcec21.js";import{a as b}from"./axios.2237760a.js";import{_ as z}from"./_plugin-vue_export-helper.cdc0426e.js";import"./SearchForm.7135984c.js";const G={name:"Conference",components:{LeaveButton:R,Map:H,ConferenceLayout:V,BackButton:M,EditButton:U,Link:T,DeleteButton:A,ShareNetwork:F,SocialMedia:j,Head:O},data(){return{dialog:!1,file:null,array:[]}},props:{conference:Object,mapId:String,user:Object,shareUrl:String,shareText:String,canLeave:Boolean,breadcrumbs:Array},methods:{saveCoordinates(){this.$store.commit("saveCoordinates",{lat:parseFloat(this.conference.latitude),lng:parseFloat(this.conference.longitude)})},canEdit(){return!!(this.isCreator()||this.isAdmin())},isCreator(){return this.$page.props.auth.user.id===this.conference.creator_id},isAdmin(){return this.$page.props.auth.isAdmin},setBreadcrumbItems(i){this.array.unshift({title:i.title,href:`/conferences/category/${i.id}`}),i.parents&&this.setBreadcrumbItems(i.parents)},exportReports(){this.dialog=!0,b.get(`/reports/${this.conference.id}/export/csv`)},exportUserListeners(){this.dialog=!0,b.get(`/users/${this.conference.id}/export/csv`)},resetDialog(){this.dialog=!1,this.file=null}},mounted(){Echo.private("export-reports").listen("ReportExportDone",i=>{this.file=i.fileName}),Echo.private("export-user-listener").listen("UserListenerExportDone",i=>{this.file=i.fileName}),this.breadcrumbs.parents&&this.setBreadcrumbItems(this.breadcrumbs.parents),this.array.unshift({title:"Conferences",href:"/"}),this.array.push({title:this.breadcrumbs.child.title,href:`/conferences/category/${this.breadcrumbs.child.id}`})}},J={class:"conference-show"},K={class:"mb-7"},P={class:"conference-detail"},Q={class:"conference-field pl-8"},W={class:"conference-field"},X=e("div",null,[e("i",{class:"bi bi-calendar-event"})],-1),Y={class:"conference-field"},Z=e("div",null,[e("i",{class:"bi bi-geo-alt"})],-1),$={class:"conference-field"},ee=e("div",null,[e("i",{class:"bi bi-geo-alt-fill"})],-1),te={class:"conference-field"},ne=e("div",null,[e("i",{class:"bi bi-globe-americas"})],-1),oe={class:"conference-show-footer"},ie={key:0},re={key:1},se={key:0,class:"conference-leave-footer"},ce={class:"text-center"},ae=["href"];function le(i,d,t,de,s,c){const g=n("Head"),k=n("ConferenceLayout"),x=n("v-breadcrumbs"),C=n("Map"),h=n("Link"),y=n("EditButton"),B=n("DeleteButton"),L=n("LeaveButton"),w=n("SocialMedia"),D=n("v-progress-circular"),E=n("v-card-text"),S=n("v-btn"),I=n("v-card-actions"),v=n("v-card"),N=n("v-dialog");return a(),f(q,null,[o(g,{title:"Conference"}),o(k),o(x,{items:s.array,divider:"/"},null,8,["items"]),e("div",J,[o(C,{latitude:t.conference.latitude,longitude:t.conference.longitude,mapId:t.mapId,class:"mb-7 ml-4 mr-10"},null,8,["latitude","longitude","mapId"]),e("div",K,[e("div",P,[e("div",Q,l(t.conference.title),1),e("div",W,[X,e("div",null,l(t.conference.date),1)]),e("div",Y,[Z,e("div",null,l(t.conference.latitude),1)]),e("div",$,[ee,e("div",null,l(t.conference.longitude),1)]),e("div",te,[ne,e("div",null,l(t.conference.country),1)])]),e("div",oe,[e("div",null,[o(h,{href:"/",class:"btn btn-outline-secondary btn-conference"},{default:r(()=>[u(" back")]),_:1})]),c.canEdit()?(a(),f("div",ie,[o(y,{"conference-id":t.conference.id,onClick:c.saveCoordinates},null,8,["conference-id","onClick"])])):m("",!0),c.canEdit()?(a(),f("div",re,[o(B,{id:t.conference.id},null,8,["id"])])):m("",!0)]),o(h,{href:i.route("reports.show",{conference:t.conference.id}),class:"w-full mt-4 btn btn-outline-primary btn-join"},{default:r(()=>[u(" Reports ")]),_:1},8,["href"]),t.canLeave?(a(),f("div",se,[o(L,{user:t.user,"conference-id":t.conference.id,"title-conference":t.conference.title,class:"w-full mt-4"},null,8,["user","conference-id","title-conference"]),o(w,{url:`${this.shareUrl+t.conference.id}`,text:`${this.shareText}`},null,8,["url","text"])])):m("",!0)])]),e("div",ce,[o(N,{modelValue:s.dialog,"onUpdate:modelValue":d[1]||(d[1]=_=>s.dialog=_)},{default:r(()=>[s.file?(a(),p(v,{key:1,class:"export-dialog-link"},{default:r(()=>[e("a",{class:"export-link",target:"_blank",href:i.route("downloads.file",{file:s.file}),onClick:d[0]||(d[0]=(..._)=>c.resetDialog&&c.resetDialog(..._))},"click to download "+l(s.file),9,ae)]),_:1})):(a(),p(v,{key:0},{default:r(()=>[o(E,{class:"dialog-spinner"},{default:r(()=>[o(D,{color:"primary",indeterminate:"",size:104,width:12}),u(" creating export ")]),_:1}),o(I,null,{default:r(()=>[o(S,{color:"primary",block:"",onClick:c.resetDialog},{default:r(()=>[u("Close Dialog")]),_:1},8,["onClick"])]),_:1})]),_:1}))]),_:1},8,["modelValue"])])],64)}const Ce=z(G,[["render",le]]);export{Ce as default};
