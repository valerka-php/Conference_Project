import{H as k,L as w,C as R,q as n,o as m,g as a,a as o,w as p,F as B,t as u,k as d,d as l,e as C}from"./app.37dcec21.js";import{H as O}from"./HomeLayout.ece2bcf7.js";import{Z as N}from"./main.01a381b1.js";import{B as F}from"./BackButton.45c05563.js";import{_ as D}from"./_plugin-vue_export-helper.cdc0426e.js";import"./SearchForm.7135984c.js";var L={env:{browser:!0,es6:!0},extends:["eslint:recommended"],parserOptions:{ecmaVersion:2020,sourceType:"module"},rules:{indent:["error",2],quotes:["warn","single"],semi:["warn","never"],"comma-dangle":["warn","always-multiline"]}};const U={name:"EditReport",computed:{rules(){return L.rules}},components:{BackButton:F,ConferenceLayout:O,Head:k,Link:w,Datepicker:N},props:{report:Array,errors:Object,categories:Object},data(){return{valid:!0,withoutRules:[],titleRules:[e=>!!e||"Name is required",e=>e&&e.length<=255||"Name must be less than 255 characters",e=>e&&e.length>=2||"Name must be more than 2 characters"],descriptionRules:[e=>e&&e.length<=255||"Name must be less than 255 characters"],fileRules:[e=>R(e[0].size<=1e7)||"Size must be less then 10 mb",e=>this.getFileType(e)==="pptx"||this.getFileType(e)==="ppt"||"File must be pptx or ppt"],form:{title:"",description:"",startTime:"",endTime:"",category_id:""},presentation:!1,startTime:{hours:0,minutes:0,seconds:0},endTime:{hours:0,minutes:0,seconds:0}}},methods:{async validate(){const{valid:e}=await this.$refs.form.validate();e&&this.submit()},submit(){confirm("Do you want save it?")&&(this.getTime(),this.$inertia.post(`/reports/${this.report.id}/update/${this.report.conference_id}`,{title:this.form.title,description:this.form.description,start_time:this.form.startTime,end_time:this.form.endTime,category_id:this.form.category_id,file:this.presentation},{forceFormData:!0}))},getTime(){this.form.startTime=this.startTime.hours+":"+this.startTime.minutes,this.form.endTime=this.endTime.hours+":"+this.endTime.minutes},parseTime(e,t){this.startTime.hours=e.substr(0,e.indexOf(":")),this.startTime.minutes=e.substr(e.indexOf(":")+1,2),this.startTime.seconds=e.substr(e.indexOf(":")+4),this.endTime.hours=t.substr(0,t.indexOf(":")),this.endTime.minutes=t.substr(t.indexOf(":")+1,2),this.endTime.seconds=t.substr(t.indexOf(":")+4)},getFileType(e){let t=e[0].name.lastIndexOf(".")+1,i=e[0].name.length;return e[0].name.substring(t,i)}},mounted(){this.form.title=this.report.title,this.form.category_id=this.report.category_id,this.form.description=this.report.description,this.parseTime(this.report.start_time,this.report.end_time)}},H={key:0,class:"error-form"},S={key:0,class:"mb-5 errors"},z={class:"report-time"},q={class:"set-time"},E={key:0,class:"error-form"},j={key:1,class:"error-form"},Z={class:"report-presentation"},A=l("i",{class:"bi bi-file-text",style:{"font-size":"45px"}},null,-1),I={class:"register-form-footer"};function G(e,t,i,J,s,f){const h=n("Head"),_=n("ConferenceLayout"),v=n("v-text-field"),b=n("v-select"),c=n("Datepicker"),g=n("v-textarea"),y=n("v-file-input"),V=n("BackButton"),x=n("v-btn"),T=n("v-form");return m(),a(B,null,[o(h,{title:"Report"}),o(_),o(T,{ref:"form",class:"report-create",modelValue:s.valid,"onUpdate:modelValue":t[6]||(t[6]=r=>s.valid=r),"lazy-validation":""},{default:p(()=>[o(v,{label:"Title",rules:s.titleRules,modelValue:s.form.title,"onUpdate:modelValue":t[0]||(t[0]=r=>s.form.title=r)},null,8,["rules","modelValue"]),i.errors.title?(m(),a("div",H,u(i.errors.title),1)):d("",!0),l("div",null,[o(b,{modelValue:s.form.category_id,"onUpdate:modelValue":t[1]||(t[1]=r=>s.form.category_id=r),items:i.categories,"item-value":"id","item-title":"title",label:"Category",required:""},null,8,["modelValue","items"]),i.errors.category_id?(m(),a("div",S,u(i.errors.category_id),1)):d("",!0)]),l("div",z,[l("div",q,[o(c,{modelValue:s.startTime,"onUpdate:modelValue":t[2]||(t[2]=r=>s.startTime=r),placeholder:"Select Start Time","min-time":{hours:8},"max-time":{hours:20},"minutes-increment":"15","minutes-grid-increment":"15","time-picker":""},null,8,["modelValue"]),o(c,{placeholder:"Select End Time","min-time":{hours:8},"max-time":{hours:20},modelValue:s.endTime,"onUpdate:modelValue":t[3]||(t[3]=r=>s.endTime=r),"minutes-increment":"15","minutes-grid-increment":"15","time-picker":""},null,8,["modelValue"])]),i.errors.time?(m(),a("div",E,u(i.errors.time),1)):d("",!0)]),o(g,{class:"mt-5",solo:"",name:"input-7-4",rules:s.descriptionRules,modelValue:s.form.description,"onUpdate:modelValue":t[4]||(t[4]=r=>s.form.description=r),label:"Description"},null,8,["rules","modelValue"]),i.errors.description?(m(),a("div",j,u(i.errors.description),1)):d("",!0),l("div",Z,[A,o(y,{label:"File input",variant:"solo",rules:s.presentation===!1?s.withoutRules:s.fileRules,modelValue:s.presentation,"onUpdate:modelValue":t[5]||(t[5]=r=>s.presentation=r)},null,8,["rules","modelValue"])]),l("div",I,[o(V,{class:"v-btn v-btn--elevated v-theme--light v-btn--density-default v-btn--size-default v-btn--variant-elevated ml-4"}),o(x,{onClick:f.validate,color:"success",class:"mr-4"},{default:p(()=>[C(" save ")]),_:1},8,["onClick"])])]),_:1},8,["modelValue"])],64)}const Y=D(U,[["render",G]]);export{Y as default};
