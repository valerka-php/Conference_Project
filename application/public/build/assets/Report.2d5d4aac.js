import{L as w,q as l,o as _,g as f,d as i,t as p,a as t,w as e,k as b,f as y,F as B,e as s,c as v}from"./app.37dcec21.js";import{B as D}from"./BackButton.45c05563.js";import{a as V}from"./axios.2237760a.js";import{_ as N}from"./_plugin-vue_export-helper.cdc0426e.js";const R={name:"Report",components:{BackButton:D,Link:w},data(){return{dialog:!1,file:null}},props:{report:Object,isCreator:Boolean,conferenceId:Number},methods:{deleteReport(r){confirm("Do you want delete it?")&&this.$inertia.delete(`/reports/${r}`)},exportComments(){this.dialog=!0,V.get(`/comments/${this.report.id}/export/csv`)},resetDialog(){this.dialog=!1,this.file=null}},mounted(){Echo.private("export-comments").listen("CommentExportDone",r=>{this.file=r.fileName})}},E={class:"report-index"},L={class:"report-title"},F={class:"report-time"},j={class:"report-description"},q={class:"report-footer-buttons"},z={key:0},A={key:1},I={class:"text-center"},M=["href"],O=i("hr",{class:"mt-9"},null,-1);function S(r,n,o,T,d,a){const c=l("Link"),u=l("v-btn"),h=l("v-progress-circular"),k=l("v-card-text"),C=l("v-card-actions"),g=l("v-card"),x=l("v-dialog");return _(),f(B,null,[i("div",E,[i("div",L,p(o.report.title),1),i("div",F,p(o.report.start_time.substring(0,5)+" - "+o.report.end_time.substring(0,5)),1),i("div",j,p(o.report.description),1),i("div",q,[t(c,{class:"btn btn-outline-secondary btn-report mr-5",href:r.route("reports.show",{conference:o.report.conference_id})},{default:e(()=>[s("back ")]),_:1},8,["href"]),t(c,{class:"btn btn-outline-info download-btn bi bi-download mr-5",href:"/download/"+o.report.presentation.split("/")[1]},{default:e(()=>[s("download ")]),_:1},8,["href"]),o.isCreator?(_(),f("div",z,[t(c,{class:"btn btn-outline-warning btn-report mr-5",href:r.route("reports.edit",{report:o.report.id})},{default:e(()=>[s("Edit ")]),_:1},8,["href"]),t(c,{onClick:n[0]||(n[0]=m=>a.deleteReport(o.report.id)),class:"btn btn-outline-danger btn-report mr-5"},{default:e(()=>[s("Cancel ")]),_:1})])):b("",!0),r.$page.props.auth.isAdmin?(_(),f("div",A,[t(c,{onClick:n[1]||(n[1]=m=>a.deleteReport(o.report.id)),class:"btn btn-outline-danger btn-report mr-5"},{default:e(()=>[s("delete ")]),_:1}),t(u,{onClick:y(a.exportComments,["prevent"])},{default:e(()=>[s(" export comments ")]),_:1},8,["onClick"])])):b("",!0)])]),i("div",I,[t(x,{modelValue:d.dialog,"onUpdate:modelValue":n[3]||(n[3]=m=>d.dialog=m)},{default:e(()=>[d.file?(_(),v(g,{key:1,class:"export-dialog-link"},{default:e(()=>[i("a",{class:"export-link",target:"_blank",href:r.route("downloads.file",{file:d.file}),onClick:n[2]||(n[2]=(...m)=>a.resetDialog&&a.resetDialog(...m))},"click to download "+p(d.file),9,M)]),_:1})):(_(),v(g,{key:0},{default:e(()=>[t(k,{class:"dialog-spinner"},{default:e(()=>[t(h,{color:"primary",indeterminate:"",size:104,width:12}),s(" creating export ")]),_:1}),t(C,null,{default:e(()=>[t(u,{color:"primary",block:"",onClick:a.resetDialog},{default:e(()=>[s("Close Dialog")]),_:1},8,["onClick"])]),_:1})]),_:1}))]),_:1},8,["modelValue"])]),O],64)}const K=N(R,[["render",S]]);export{K as default};
